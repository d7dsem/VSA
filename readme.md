# Установити залежності

З інтернету
```bash
pip install -r requirements.txt
```

Оффлайн
```bash
cd path/to/VSA/

python -m pip install --no-index --find-links=./wheels -r requirements.txt
```

# Перевірка вав

Linux/WSL
```bash
for f in *.wav; do sox --i -r "$f" | awk -v f="$f" '{print f "\t  \t" $1}'; done

for f in *.wav; do echo -e "$f\t$(sox --i -r "$f") Hz\t$(sox --i -c "$f") ch\t$(sox --i -e "$f") / $(sox --i -b "$f")-bit"; done

for f in *.wav; do printf "%s\t%s Hz\t%s ch\t%s / %s-bit\n" "$f" "$(sox --i -r "$f")" "$(sox --i -c "$f")" "$(sox --i -e "$f")" "$(sox --i -b "$f")"; done

```



# VSA Suit

Це сімейство програм для досліджеян IQ записів сигналів.

На вход моливо подавапти IQ int16 записи. У `.wav` формсті - тільки дваканальін 16 бітні.
Або `.bin`, але тожі явно вказувати семпал рейт


## Features


### Перегляд "мультика" про сигнал - спектр+ватерфол

Є пауза (spase) і наівагація стрілками. ESC закрити вікно.
Надає первинну інфу по виявленим смугам і зберігає у файл. Допоміжна фіча.
Ширина ФФТ фіксована. 
Викорсиовуєтся для первинного ознайомлення.
Тонкі налаштуван в тілі скрипта.

```shell
VSA/src/vsa_file_entry_mk2.py -i D:/C/Repo/signals_data/OFDM/5MHz-11-14-25.wav
::VSA/src/vsa_file_entry_mk2.py -i D:/C/Repo/signals_data/OFDM/5MHz-11-14-25.bin --Fs 10e6
```

### Analize Stage I

Призначення: "spectral analysis, build wfall fingerprint, detect and spread bursts\bandwidth"
Метод: chunk-by-chunk FFT → частотний аналіз
Знаходить: де В СПЕКТРІ є активні смуги
Вихід: waterfall PNG, bw_busrts_{fft_n}x{batch_n}.json, .bin файли з IQ по частотних смугах

Скрипт, який при першому запуску з файлом будує ватерфол всього файлу і грубо, дуже грубо, формує перелік сегментів (у часі) в яких бурсти лежать у певні чатсоній області. Дозволяє оцінити частоний хопінг.
Повторний запуск з тими самими аргемунтами причзводитиь до вичтиуваня файлу з описом виявлених кластерів і ствренюю нових файлів у яких буде иілки она чатсота.Може помилятись. Працює грубо. 
Стрворює для артефактів каталог з назвою `.stageI_<file_stem>/` у каталозі з файлом запису.
Артефакти першого запуска - файл ватерфола і фацл з переліком сегментів первинного запису на різних чатотах хопінгу.
Після друго запуску будуть створені файли в яких сигнал присутній (переважно) на одній чатоті.
Тонкі налаштуван в тілі скрипта.
**ВАЖЛИВО**: аналзіує і виконує кластезіації не поь кожноум бурсу а по певноум інтервалу в часі - буду. батч ффт і оцінює його центр. Добре для оцінки хопінга.
```shell
VSA/src/analize_stage_I.py -i D:/C/Repo/signals_data/OFDM/5MHz-11-14-25.wav
VSA/src/analize_stage_I.py -i D:/C/Repo/signals_data/OFDM/5MHz-11-14-25.wav
```


